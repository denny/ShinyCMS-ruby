<% return unless current_user.can? :list, :shiny_blogs_blog_posts %>

  <%= render_admin_menu_section( t( 'shiny_blogs.admin.blogs.title' ), 'rss' ) do %>

    <% if ShinyBlogs::Blog.multiple_blogs_mode? %>

      <%= render_admin_menu_item_if( current_user.can?( :list, :shiny_blogs_blogs ),
          t( 'shiny_blogs.admin.blogs.index.title' ), shiny_blogs.blogs_path, 'library' ) %>

      <%= render_admin_menu_item_if( current_user.can?( :add, :shiny_blogs_blogs ),
          t( 'shiny_blogs.admin.blogs.new.title' ), shiny_blogs.new_blog_path, 'library-add' ) %>

    <% else %>
      <% if ShinyBlogs::Blog.count == 0 %>

      <%= render_admin_menu_item_if( current_user.can?( :add, :shiny_blogs_blogs ),
          t( 'shiny_blogs.admin.blogs.new.title' ), shiny_blogs.new_blog_path, 'library-add' ) %>

      <% else %>

      <%= render_admin_menu_item_if( current_user.can?( :edit, :shiny_blogs_blogs ),
          t( 'shiny_blogs.admin.blogs.edit.title' ), shiny_blogs.edit_blog_path( ShinyBlogs::Blog.first ), 'library' ) %>

      <% end %>
    <% end %>

    <% if ShinyBlogs::Blog.count > 0 %>
      <%# TODO: How do these links work for multi-blog sites? How do we know which blog to post to? %>

      <%= render_admin_menu_item(
          t( 'shiny_blogs.admin.blog.posts.index.title' ), shiny_blogs.blog_posts_path( ShinyBlogs::Blog.first ), 'list' ) %>

      <%= render_admin_menu_item_if( current_user.can?( :add, :shiny_blogs_blog_posts ),
          t( 'shiny_blogs.admin.blog.posts.new.title' ), shiny_blogs.new_blog_post_path( ShinyBlogs::Blog.first ), 'pencil' ) %>

    <% end %>

  <% end %>
