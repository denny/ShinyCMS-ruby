<% unless resource.discussion.hidden %>

<a onclick="toggleHidden('comment_form')"><%= t( 'discussions.comment' ) %></a>
<div id="comment_form" hidden>
  <%= render partial: 'discussions/comment_form', locals: { discussion: resource.discussion } %>
</div>

<h3>
  <%= t( 'discussions.comments' ) %>
</h3>

<% if resource.discussion.top_level_comments.size > 0 %>
  <%= render partial: 'discussions/top_level',
             locals: { comments: resource.discussion.top_level_comments } %>
<% else %>
  <section>
    <p>
      <%= t( 'discussions.zero_comments' ) %>
    </p>
  </section>
<% end %>

<script>
function toggleHidden( wrapper_id ) {
  var wrapper = document.getElementById( wrapper_id );
  if ( wrapper.hidden ) {
    wrapper.hidden = false;
  } else {
    wrapper.hidden = true;
  }
}
</script>

<% end %>
