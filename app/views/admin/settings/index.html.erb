<% @page_title = 'Site Settings' %>

<%= form_with name: 'all_settings', url: admin_settings_path, method: :post do %>
<table class="list">
  <% @settings.each do |s| %>
	<tr class="showfocus">
		<td>
      <label for="settings[setting_value_<%= s.id %>]"><%= s.name %></label>
		</td>
    <td>
      <%= text_field :settings, "setting_value_#{s.id}", value: s.value %>
    </td>
    <td>
      <%= text_field :settings, "setting_description_#{s.id}", value: s.description, class: 'longtext' %>
    </td>
		<td class="actions">
      <%= link_to 'Delete', admin_setting_delete_path( s ), method: :delete,
          data: { confirm: 'Are you sure?' } %>
		</td>
	</tr>
  <% end  # settings %>
</table>
<p>
  <%= submit_tag 'Update Settings' %>
</p>
<% end  # form %>

<%= form_with name: 'new_setting', url: admin_setting_create_path, method: :post do %>
  <h2>
    Add new setting
  </h2>
  <p>
    <label>
      <%= text_field :setting, :name,  placeholder: 'Setting name' %>
      <%= text_field :setting, :value, placeholder: 'Setting value (can be blank)' %>
    </label>
    <%= text_field :setting, :description, placeholder: 'Description (optional)', class: 'longtext' %>
  </p>
  <p>
    <%= submit_tag 'Add' %>
  </p>
<% end %>
