<br>
<table class="table table-responsive-sm table-striped">
  <tr>
    <th colspan="5">
      <a class="collapse-toggle" role="button" href="#" data-toggle="collapse" data-target=".collapse_capabilities" aria-expanded="true" aria-controls="collapse_capabilities">
        <%= t( 'capability.capabilities' ) %>
        <% if @user.capabilities.present? %>
        <% show = 'show ' %>
        <span class="toggle-icon-top collapse show">
          <svg><use xlink:href="<%= image_path 'coreui/icons/coreui/free-symbol-defs.svg' %>#cui-chevron-top"></use></svg>
        </span>
        <% else %>
        <% show = '' %>
        <span class="toggle-icon-bottom collapse">
          <svg><use xlink:href="<%= image_path 'coreui/icons/coreui/free-symbol-defs.svg' %>#cui-chevron-bottom"></use></svg>
        </span>
        <% end %>
      </a>
    </th>
  </tr>

  <% category = CapabilityCategory.find_by( name: 'general' ) %>
  <% category_capabilities = %w[ view_admin_area view_admin_toolbar skip skip ] %>
  <%= render_capability_category( f, category, category_capabilities, show ) %>

  <% category = CapabilityCategory.find_by( name: 'blogs' ) %>
  <% category_capabilities = %w[ list add edit destroy ] %>
  <%= render_capability_category( f, category, category_capabilities, show ) %>

  <% category = CapabilityCategory.find_by( name: 'blog_posts' ) %>
  <% category_capabilities = %w[ list add edit destroy ] %>
  <%= render_capability_category( f, category, category_capabilities, show ) %>
  <% category_capabilities = %w[ change_author skip skip skip ] %>
  <%= render_capability_category( f, category, category_capabilities, show, true ) %>

  <% category = CapabilityCategory.find_by( name: 'discussions' ) %>
  <% category_capabilities = %w[ hide unhide lock unlock ] %>
  <%= render_capability_category( f, category, category_capabilities, show ) %>

  <% category = CapabilityCategory.find_by( name: 'comments' ) %>
  <% category_capabilities = %w[ hide unhide lock unlock ] %>
  <%= render_capability_category( f, category, category_capabilities, show ) %>
  <% category_capabilities = %w[ skip skip skip delete ] %>
  <%= render_capability_category( f, category, category_capabilities, show, true ) %>

  <% category = CapabilityCategory.find_by( name: 'feature_flags' ) %>
  <% category_capabilities = %w[ list skip edit skip ] %>
  <%= render_capability_category( f, category, category_capabilities, show ) %>

  <% category_capabilities = %w[ list add edit destroy ] %>
  <% CapabilityCategory.where(
      name: %w[ inserts pages page_sections page_templates ]
    ).each do |category| %>
  <%= render_capability_category( f, category, category_capabilities, show ) %>
  <% end %>

  <% category = CapabilityCategory.find_by( name: 'settings' ) %>
  <% category_capabilities = %w[ list skip edit skip ] %>
  <%= render_capability_category( f, category, category_capabilities, show ) %>

  <% category = CapabilityCategory.find_by( name: 'users' ) %>
  <% category_capabilities = %w[ list add edit destroy ] %>
  <%= render_capability_category( f, category, category_capabilities, show ) %>
  <% category_capabilities = %w[ view_admin_notes skip skip skip ] %>
  <%= render_capability_category( f, category, category_capabilities, show, true ) %>

  <% category = CapabilityCategory.find_by( name: 'admin_users' ) %>
  <% category_capabilities = %w[ list add edit destroy ] %>
  <%= render_capability_category( f, category, category_capabilities, show ) %>
</table>
