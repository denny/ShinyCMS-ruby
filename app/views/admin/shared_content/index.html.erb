<% @page_title = t( 'admin.shared_content.shared_content' ) %>

<%= form_with model: @shared_content, name: 'all_shared_content', url: admin_shared_content_path, method: :post do |f| %>
<table class="list">
  <%= f.fields_for :elements do |fields| %>
    <%= render partial: 'element', locals: {
      fields: fields,
      content: :content,
      name: fields.object.name,
      content_type: fields.object.content_type,
      filenames: @filenames
    } %>
  <% end %>
</table>
<p>
  <%= submit_tag t( 'admin.update' ) %>
</p>
<% end %>

<%= form_with name: 'new_element', url: admin_shared_content_create_path, method: :post do %>
  <h2>
    Add new shared content
  </h2>
  <p>
    <%= text_field :new_element, :name, placeholder: t( 'admin.shared_content.name_placeholder' ) %>
    <%= select :new_element, :content_type, SharedContentElement.content_types %>
    <br><%= text_field :new_element, :content, placeholder: t( 'admin.shared_content.content_placeholder' ) %>
  </p>
  <p>
    <%= submit_tag t( 'admin.add' ) %>
  </p>
<% end %>
